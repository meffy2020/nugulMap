# ë„ˆêµ´ë§µ (NugulMap) ê°œë°œ ë…¸íŠ¸

## ğŸ“… 2026-01-20: í”„ë¡ íŠ¸ì—”ë“œ/ë°±ì—”ë“œ ì´ìŠˆ í†µí•© í•´ê²° ë° ë°°í¬ ì¤€ë¹„

### ğŸš€ ìš”ì•½
í”„ë¡ íŠ¸ì—”ë“œ UI/UX ì´ìŠˆ(ì§€ë„, ë§ˆì»¤, ë§ˆì´í˜ì´ì§€)ë¥¼ ì „ë©´ ìˆ˜ì •í•˜ê³ , ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸ API ì ‘ê·¼ ê¶Œí•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ì—¬ ë¡œì»¬ í™˜ê²½(Docker)ì—ì„œì˜ í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ëª¨ë“  ë³€ê²½ ì‚¬í•­ì€ `migration` ë¸Œëœì¹˜ì— í‘¸ì‹œë˜ì—ˆìŠµë‹ˆë‹¤.

### âœ… ì™„ë£Œëœ ì‘ì—… (Completed)

#### 1. í”„ë¡ íŠ¸ì—”ë“œ (Frontend)
- **ì§€ë„ UI ê°œì„ **:
  - `MapContainer` ë¡œë“œ ì‹œ UI ìš”ì†Œ(ê²€ìƒ‰ì°½, í”„ë¡œí•„ ë²„íŠ¼)ê°€ ì§€ë„ ë’¤ë¡œ ìˆ¨ëŠ” ë¬¸ì œ í•´ê²° (`z-index` ì¡°ì •).
  - ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ ì…ë ¥ì°½ í¬ì»¤ìŠ¤ ì‹œ í™”ë©´ì´ í™•ëŒ€ë˜ëŠ” ë¬¸ì œ í•´ê²° (`viewport` ë©”íƒ€ íƒœê·¸ ì¶”ê°€).
- **ê¸°ëŠ¥ ì¶”ê°€ ë° ìˆ˜ì •**:
  - **ì£¼ì†Œ ë³€í™˜ (Geocoding)**: `AddLocationModal`ì—ì„œ í•€ì„ ì´ë™í•˜ê±°ë‚˜ ì§€ë„ë¥¼ í´ë¦­í•  ë•Œ Kakao Maps Geocoderë¥¼ í†µí•´ ìœ„ê²½ë„ë¥¼ ë„ë¡œëª… ì£¼ì†Œë¡œ ìë™ ë³€í™˜í•˜ëŠ” ë¡œì§ êµ¬í˜„.
  - **ë§ˆì´í˜ì´ì§€**: ìš°ì¸¡ ìƒë‹¨ í”„ë¡œí•„ ì•„ì´ì½˜ í´ë¦­ ì‹œ "ë‚´ ì •ë³´" íƒ­ì—ì„œ ë‚´ê°€ ë“±ë¡í•œ ì¥ì†Œ ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ë³µêµ¬ ë° ë””ìì¸ ë³‘í•©.
  - **ë§ˆì»¤ ì´ë¯¸ì§€**: ê¸°ë³¸ í•€ ëŒ€ì‹  ì»¤ìŠ¤í…€ ì´ë¯¸ì§€(`pin.png`) ì ìš©.
  - **ì•½ê´€ ë™ì˜**: ë¡œê·¸ì¸ ì‹œ `/terms` í˜ì´ì§€ë¥¼ ê±°ì³ê°€ë„ë¡ íë¦„ í™•ì¸ ë° ìœ ì§€.
- **ì„¤ì • ë° ë¹Œë“œ**:
  - `docker-compose` ë¹Œë“œ ì‹œ `node_modules` ì¶©ëŒ ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ `.dockerignore` íŒŒì¼ ìƒì„± ë° ì„¤ì •.
  - Nginx ì—°ë™ì„ ê³ ë ¤í•˜ì—¬ `API_BASE_URL`ì„ `http://localhost` (80í¬íŠ¸)ë¡œ ë³€ê²½.

#### 2. ë°±ì—”ë“œ (Backend)
- **ë³´ì•ˆ ì„¤ì • (SecurityConfig) ìˆ˜ì •**:
  - `dev` í”„ë¡œíŒŒì¼ì—ì„œ `TestController` (`/api/test/**`) ì ‘ê·¼ ì‹œ 401 Unauthorizedê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œ í•´ê²°.
  - `@Profile({"dev", "prod", "mysql"})`ë¡œ í”„ë¡œíŒŒì¼ í™•ì¥ ë° `requestMatchers` ìˆœì„œ ì¡°ì •í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸ í—ˆìš©.
- **í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶•**:
  - `TestController`ì˜ ë§¤í•‘ ê²½ë¡œ ë¬¸ì œ (`/api/test` vs Context Path `/api`) í™•ì¸ ë° `@RequestMapping("/test")`ë¡œ ìˆ˜ì •í•˜ì—¬ URL ì¤‘ë³µ ë°©ì§€.
  - í¬ìŠ¤íŠ¸ë§¨ ëŒ€ìš© ì‰˜ ìŠ¤í¬ë¦½íŠ¸ `backend/test_api.sh` ì‘ì„± (ì‚¬ìš©ì ìƒì„±, ì¡°íšŒ, í¡ì—°êµ¬ì—­ ë“±ë¡ ë“± ì‹œë‚˜ë¦¬ì˜¤ ìë™í™”).

#### 3. ì¸í”„ë¼ (Infra)
- **Docker Compose**:
  - í”„ë¡ íŠ¸ì—”ë“œ, ë°±ì—”ë“œ, DB, MinIO, Nginx í†µí•© ì‹¤í–‰ í™˜ê²½ í…ŒìŠ¤íŠ¸ ì™„ë£Œ.
  - ì»¨í…Œì´ë„ˆ ì´ë¦„ ì¶©ëŒ ë° í¬íŠ¸ ì ìœ  ë¬¸ì œ í•´ê²° ê°€ì´ë“œ ì ìš©.

---

### ğŸ›  íŠ¸ëŸ¬ë¸”ìŠˆíŒ… (Troubleshooting)

#### 1. ë°±ì—”ë“œ API 401 Unauthorized
- **ì¦ìƒ**: `curl`ë¡œ `/api/test/users` í˜¸ì¶œ ì‹œ 401 ì—ëŸ¬ ë°œìƒ.
- **ì›ì¸**:
  1. `SecurityConfig`ê°€ `prod`, `mysql` í”„ë¡œíŒŒì¼ì—ì„œë§Œ í™œì„±í™”ë˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆì–´ `dev` í™˜ê²½ì—ì„œ ê¸°ë³¸ ë³´ì•ˆ ì„¤ì •(ëª¨ë‘ ì°¨ë‹¨)ì´ ì ìš©ë¨.
  2. `server.servlet.context-path: /api` ì„¤ì •ìœ¼ë¡œ ì¸í•´ URLì´ `/api/api/test/...`ë¡œ ì¤‘ë³µ ë§¤í•‘ë¨.
- **í•´ê²°**:
  1. `SecurityConfig`ì— `dev` í”„ë¡œíŒŒì¼ ì¶”ê°€.
  2. `TestController` ë§¤í•‘ì„ `/test`ë¡œ ë³€ê²½.
  3. `SecurityConfig`ì—ì„œ `/test/**`, `/api/test/**` ê²½ë¡œ `permitAll()` ìµœìƒë‹¨ ë°°ì¹˜.

#### 2. Docker ë¹Œë“œ ì—ëŸ¬ (Frontend)
- **ì¦ìƒ**: `cannot replace to directory .../node_modules ...` ì—ëŸ¬ ë°œìƒ.
- **ì›ì¸**: ë¡œì»¬ì˜ `node_modules` í´ë”ê°€ Docker ì»¨í…ìŠ¤íŠ¸ì— í¬í•¨ë˜ì–´ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ êµ¬ì¡°ì™€ ì¶©ëŒ.
- **í•´ê²°**: `frontend/.dockerignore` íŒŒì¼ì„ ìƒì„±í•˜ì—¬ `node_modules`, `.next` ë“±ì„ ì œì™¸.

---

### ğŸ“ ë‚¨ì€ ê³¼ì œ (To-Do)

- [x] **Git Merge & Conflict Resolution**:
  - `migration` ë¸Œëœì¹˜ì˜ ëª¨ë“  ë³€ê²½ì‚¬í•­ì„ ì›ê²© `main` ë¸Œëœì¹˜ì™€ ë³‘í•© ì™„ë£Œ.
  - `add-location-modal.tsx` ë“± ì£¼ìš” íŒŒì¼ì˜ ì¶©ëŒì„ `migration` ë²„ì „(ìµœì‹  ê¸°ëŠ¥) ì¤‘ì‹¬ìœ¼ë¡œ í•´ê²°.
- [ ] **EC2 ë°°í¬ (ì‹¤í–‰ ëŒ€ê¸°)**:
  - EC2 ì ‘ì† -> `git pull origin main` -> `docker compose up -d --build`.

### ğŸ’¡ ìµœì¢… ìƒíƒœ
í˜„ì¬ ê¹ƒí—ˆë¸Œ `main` ë¸Œëœì¹˜ëŠ” ë¡œì»¬ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•œ **ì™„ì„±ëœ ì†ŒìŠ¤ ì½”ë“œ**ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. (ì£¼ì†Œ ë³€í™˜, ë§ˆì´í˜ì´ì§€, ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸ í—ˆìš© ë“±)

---

### ğŸ’¡ ì»¤ë§¨ë“œ ê°€ì´ë“œ

**ë°±ì—”ë“œ API í…ŒìŠ¤íŠ¸ ì‹¤í–‰:**
```bash
chmod +x backend/test_api.sh
./backend/test_api.sh
```

**ë¡œì»¬ Docker ì „ì²´ ì¬ì‹œì‘:**
```bash
docker compose down
docker compose up -d --build
```
